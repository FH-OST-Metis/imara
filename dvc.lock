schema: '2.0'
stages:
  extract:
    cmd: uv run python src/app/extract.py --input 
      data/raw/documents/2402.14887v4.pdf --output data/processed/extracted
    deps:
    - path: data/raw/documents/2402.14887v4.pdf
      hash: md5
      md5: b74c219cf32c9f0fa128118c3bacf0c2
      size: 222042
    - path: src/app/extract.py
      hash: md5
      md5: ad4d553b94723e18e22baeb9bdea90e1
      size: 15715
    outs:
    - path: data/processed/extracted
      hash: md5
      md5: 331c5f352599c641691b7b5217b9fffc.dir
      size: 5086208
      nfiles: 6
  chunk:
    cmd: uv run python src/app/chunk.py --input data/processed/extracted 
      --output data/processed/chunks
    deps:
    - path: data/processed/extracted
      hash: md5
      md5: 331c5f352599c641691b7b5217b9fffc.dir
      size: 5086208
      nfiles: 6
    - path: src/app/chunk.py
      hash: md5
      md5: 95934b074d5b35af5efc80d5a9a7d499
      size: 3530
    outs:
    - path: data/processed/chunks
      hash: md5
      md5: c95209faeebd9dcd59855b660db4052a.dir
      size: 24551
      nfiles: 43
  embed:
    cmd: uv run python src/app/embed.py --input data/processed/chunks 
      --artifacts data/processed/extracted --database_url 
      postgresql://postgres:postgres@127.0.0.1:54322/postgres
    deps:
    - path: data/processed/chunks
      hash: md5
      md5: c95209faeebd9dcd59855b660db4052a.dir
      size: 24551
      nfiles: 43
    - path: data/processed/extracted
      hash: md5
      md5: 4065efd980e1243efa3506a32f8c9882.dir
      size: 5086187
      nfiles: 6
    - path: src/app/embed.py
      hash: md5
      md5: 24ba96d93fddcf0121bf423806c54de5
      size: 2826
  prep_pipeline:
    cmd: uv run python src/app/prep_pipeline.py
    deps:
    - path: src/app/prep_pipeline.py
      hash: md5
      md5: 3c82813e0507d3971a369fa333e9c814
      size: 953
